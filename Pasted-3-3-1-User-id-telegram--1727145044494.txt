3. Модели Данных
3.1. Пользователь (User)
Поля:
id: Уникальный идентификатор пользователя.
telegram_id: Уникальный идентификатор пользователя в Telegram.
username: Имя пользователя в Telegram.
stars_balance: Баланс звёзд XTR.
subscriber_id: Внешний ключ на таблицу subscribers.
Связи:
subscriber: Связь с подпиской пользователя.
bids: Связь с таблицей bids.
payments: Связь с таблицей payments.
watchlist: Связь с таблицей watchlist.
user_achievements: Связь с таблицей user_achievements.
ratings: Связь с таблицей ratings.
3.2. Подписчик (Subscriber)
Поля:
id: Уникальный идентификатор подписчика.
telegram_id: Уникальный идентификатор подписчика в Telegram.
username: Имя подписчика в Telegram.
subscription_status: Статус подписки (active или inactive).
subscription_end: Дата окончания подписки.
Связи:
users: Связь с таблицей users.
3.3. Аукцион (Auction)
Поля:
id: Уникальный идентификатор аукциона.
uuid: Уникальный универсальный идентификатор аукциона.
title: Название аукциона.
description: Описание аукциона.
image_filename: Имя файла изображения аукциона.
starting_price: Стартовая цена аукциона.
current_price: Текущая цена аукциона.
end_time: Время окончания аукциона.
is_active: Статус активности аукциона.
subscriber_id: Внешний ключ на таблицу subscribers.
auction_type: Тип аукциона (английский, голландский, закрытые ставки, вечный).
Связи:
bids: Связь с таблицей bids.
watchlists: Связь с таблицей watchlist.
ratings: Связь с таблицей ratings.
3.4. Ставка (Bid)
Поля:
id: Уникальный идентификатор ставки.
auction_id: Внешний ключ на таблицу auctions.
user_id: Внешний ключ на таблицу users.
amount: Сумма ставки.
max_bid: Максимальная сумма для автоматических ставок.
timestamp: Время создания ставки.
Связи:
auction: Связь с аукционом.
user: Связь с пользователем.
3.5. Платеж (Payment)
Поля:
id: Уникальный идентификатор платежа.
user_id: Внешний ключ на таблицу users.
amount: Сумма платежа.
currency: Валюта платежа (например, USD, EUR, RUB).
telegram_payment_id: Идентификатор платежа от Telegram.
status: Статус платежа (pending, successful, failed).
timestamp: Время создания платежа.
Связи:
user: Связь с пользователем.
3.6. Список Наблюдения (Watchlist)
Поля:
id: Уникальный идентификатор записи.
user_id: Внешний ключ на таблицу users.
auction_id: Внешний ключ на таблицу auctions.
Связи:
user: Связь с пользователем.
auction: Связь с аукционом.
3.7. Достижение (Achievement)
Поля:
id: Уникальный идентификатор достижения.
name: Название достижения.
description: Описание достижения.
icon: Иконка достижения.
Связи:
user_achievements: Связь с таблицей user_achievements.
3.8. Пользовательское Достижение (UserAchievement)
Поля:
id: Уникальный идентификатор записи.
user_id: Внешний ключ на таблицу users.
achievement_id: Внешний ключ на таблицу achievements.
timestamp: Время получения достижения.
Связи:
user: Связь с пользователем.
achievement: Связь с достижением.
3.9. Рейтинг (Rating)
Поля:
id: Уникальный идентификатор рейтинга.
auction_id: Внешний ключ на таблицу auctions.
user_id: Внешний ключ на таблицу users.
rating: Оценка (например, 1-5).
review: Отзыв.
timestamp: Время создания рейтинга.
Связи:
auction: Связь с аукционом.
user: Связь с пользователем.