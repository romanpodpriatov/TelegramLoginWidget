2. Ошибка BuildError из-за отсутствия маршрута profile

Причина:
В вашем шаблоне base.html есть ссылка на маршрут profile:

html
Копировать код
<li><a href="{{ url_for('profile') }}">Profile</a></li>
Однако в вашем приложении нет маршрута с именем profile, что вызывает ошибку при построении URL.

Решение:
Есть два варианта решения этой проблемы:

Создать маршрут profile.
Удалить или изменить ссылку на profile в шаблоне base.html.
Вариант 1: Создать маршрут profile
Если вы планируете иметь страницу профиля пользователя, вам нужно определить маршрут profile. Пример:

python
Копировать код
# profile.py
from quart import Blueprint, render_template
from quart_auth import login_required, current_user
from db import async_session
from models import User

profile_bp = Blueprint('profile', __name__)

@profile_bp.route('/profile')
@login_required
async def profile():
    async with async_session() as session:
        user = await session.get(User, current_user.id)
        if not user:
            await logout_user()
            return redirect(url_for('auth.login'))
        return await render_template('profile.html', user=user)

# В app.py зарегистрируйте blueprint
app.register_blueprint(profile_bp)
Создайте шаблон profile.html:

html
Копировать код
<!-- templates/profile.html -->
{% extends "base.html" %}

{% block content %}
    <h2>Профиль пользователя</h2>
    <p>Имя: {{ user.username }}</p>
    <!-- Добавьте дополнительные детали профиля по необходимости -->
{% endblock %}
Вариант 2: Удалить или изменить ссылку на profile
Если маршрут profile не нужен, удалите или исправьте ссылку в base.html.

Пример исправления:

html
Копировать код
<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>My App</title>
    <!-- Другие элементы head -->
</head>
<body>
    <nav>
        <ul>
            <li><a href="{{ url_for('index') }}">Home</a></li>
            {% if current_user.is_authenticated %}
                <!-- Удалите или закомментируйте эту строку -->
                <!-- <li><a href="{{ url_for('profile') }}">Profile</a></li> -->
                <li><a href="{{ url_for('auth.logout') }}">Logout</a></li>
            {% else %}
                <li><a href="{{ url_for('auth.login') }}">Login</a></li>
            {% endif %}
        </ul>
    </nav>
    {% block content %}{% endblock %}
</body>
</html>
Пояснения:

Удаление ссылки на profile: Если страница профиля не требуется, просто удалите строку с ссылкой.
Исправление имени маршрута: Если вы случайно использовали неверное имя, измените profile на правильное имя существующего маршрута.